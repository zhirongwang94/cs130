{"ast":null,"code":"import { Plugins } from \"@capacitor/core\"; //import { SMS } from '@ionic-native/sms';\n\nconst {\n  Contacts,\n  Share\n} = Plugins;\n\nvar Singleton = function () {\n  let instance;\n\n  function createInstance() {\n    var ct = new ContactTracing();\n    return ct;\n  }\n\n  return {\n    getInstance: function () {\n      if (!instance) {\n        instance = createInstance();\n      }\n\n      return instance;\n    }\n  };\n}();\n\nclass ContactTracing {\n  constructor() {\n    this.contacts = [];\n    this.selected = [];\n    this.conIndex = [];\n    this.symptomList = [{\n      val: \"Cough\",\n      isChecked: false\n    }, {\n      val: \"Fever or chills\",\n      isChecked: false\n    }, {\n      val: \"Shortness of breath or difficulty breathing\",\n      isChecked: false\n    }, {\n      val: \"Fatigue\",\n      isChecked: false\n    }, {\n      val: \"Muscle or body aches\",\n      isChecked: false\n    }, {\n      val: \"Headaches\",\n      isChecked: false\n    }, {\n      val: \"New loss of taste or smell\",\n      isChecked: false\n    }, {\n      val: \"Sore throat\",\n      isChecked: false\n    }, {\n      val: \"Congestion or runny nose\",\n      isChecked: false\n    }, {\n      val: \"Nausea or vomiting\",\n      isChecked: false\n    }, {\n      val: \"Diarrhea\",\n      isChecked: false\n    }];\n    this.emergencyList = [{\n      val: \"Trouble breathing\",\n      isChecked: false\n    }, {\n      val: \"Persistent pain or pressure in chest\",\n      isChecked: false\n    }, {\n      val: \"New confusion\",\n      isChecked: false\n    }, {\n      val: \"Inability to wake or stay awake\",\n      isChecked: false\n    }, {\n      val: \"Bluish lips or face\",\n      isChecked: false\n    }];\n    this.loadContacts(); //this.sms = typeof SMS;\n  }\n\n  getEmergencyList() {\n    return this.emergencyList;\n  }\n\n  getSymptomsList() {\n    return this.symptomList;\n  }\n\n  getContactIndex() {\n    return this.conIndex;\n  }\n\n  checkSymptom(i) {\n    if (i < this.symptomList.length) {\n      this.symptomList[i].isChecked = !this.symptomList[i].isChecked;\n    }\n  }\n\n  checkEmergency(i) {\n    if (i < this.emergencyList.length) {\n      this.emergencyList[i].isChecked = !this.emergencyList[i].isChecked;\n    }\n  } //Updates list of \n\n\n  check(i) {\n    if (i < this.conIndex.length) {\n      this.conIndex[i] = !this.conIndex[i];\n    }\n  } //Getter method for all device contacts\n  //Void input\n  //Returns list of Contact objects\n\n\n  getContacts() {\n    console.log('GRABBING CONTACT LIST FROM OBJECT\\n'); //console.log(this.contacts);\n\n    return this.contacts;\n  } //Getter method for selected device contacts\n  //Void input\n  //Returns list of Contact objects\n\n\n  getSelected() {\n    return this.selected;\n  }\n\n  sendMessage() {\n    // for(var i = 0; i<this.contacts.length; i++){\n    //   if(this.conIndex[i]){\n    //     this.selected.push(this.contacts[i]);\n    //   }\n    // }\n    // console.log(\"SELECTED CONTACTS\");\n    // console.log(this.selected);\n    this.sendSms();\n  }\n\n  select(i) {\n    if (i >= 0) {\n      if (i < this.contacts.length) {\n        this.conIndex[i] = !this.conIndex[i];\n      }\n    }\n  }\n\n  async loadContacts() {\n    Contacts.getContacts().then(results => {\n      this.contacts = results.contacts;\n      console.log(this.contacts);\n\n      for (var i = 0; i < this.contacts.length; i++) {\n        this.conIndex.push(false);\n      }\n    });\n  } // private success(){ alert('Message sent successfully'); };\n  // private error(e) { alert('Message Failed:' + e); };\n\n\n  async sendSms() {\n    var title = \"I have experiencing symptoms of Covid-19\\n\";\n    var message = \"\";\n    message += \"------------------------------\\nIF EXPERIENCING SEEK IMMEDIATE MEDICAL ATTENTION!\\n\";\n\n    for (var index in this.emergencyList) {\n      if (this.emergencyList[index].isChecked) {\n        message += this.emergencyList[index].val + \"\\n\";\n      }\n    }\n\n    message += \"------------------------------\\nNon-Emergency Symptoms:\\n\";\n\n    for (var index1 in this.symptomList) {\n      if (this.symptomList[index1].isChecked) {\n        message += this.symptomList[index1].val + \"\\n\";\n      }\n    } // var options = {\n    //   replaceLineBreaks: false, // true to replace \\n by a new line, false by default\n    //   android: {\n    //       intent: 'INTENT'  // send SMS with the native android SMS messaging\n    //       //intent: '' // send SMS without opening any other app, require : android.permission.SEND_SMS and android.permission.READ_PHONE_STATE\n    //   }\n    // };\n    //var number = '5167120628';\n\n\n    let shareRet = await Share.share({\n      title: title,\n      text: message,\n      url: 'http://ionicframework.com/',\n      dialogTitle: 'Share with those who you have been in contact with'\n    });\n\n    if (shareRet) {\n      console.log(\"Success!\\n\");\n    } else {\n      console.log(\"Failed\\n\");\n    } // SMS.send(number, message, options).then(\n    //   success => {\n    //     console.log(success);\n    //   },\n    //   error => {\n    //     console.log(error);\n    //   },\n    // );\n\n  }\n\n}\n\nexport default Singleton; // private onSuccess(contacts:Contact[]){\n//   console.log(contacts.length + ' contacts found');\n//   for(var i = 0; i < contacts.length; i++) {\n//     console.log(contacts[i].contactId + \" - \" + contacts[i].displayName);\n//     for(var j = 0; j < contacts[i].phoneNumbers.length; j++) {\n//        var phone = contacts[i].phoneNumbers[j];\n//        console.log(\"===> \" + phone + \"\\n\");\n//     }\n//  }\n// }\n// private onError(error:string){\n//   console.log(\"Error grabbing contacts! \" + error);\n// }","map":{"version":3,"sources":["/Users/calvinyung/Desktop/Fall 2020/cs130/project/cs130/src/pages/ContactTracing.tsx"],"names":["Plugins","Contacts","Share","Singleton","instance","createInstance","ct","ContactTracing","getInstance","constructor","contacts","selected","conIndex","symptomList","val","isChecked","emergencyList","loadContacts","getEmergencyList","getSymptomsList","getContactIndex","checkSymptom","i","length","checkEmergency","check","getContacts","console","log","getSelected","sendMessage","sendSms","select","then","results","push","title","message","index","index1","shareRet","share","text","url","dialogTitle"],"mappings":"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","sourcesContent":["import { Contact } from \"@capacitor-community/contacts\";\nimport { Plugins } from \"@capacitor/core\";\n//import { SMS } from '@ionic-native/sms';\nconst  { Contacts, Share } = Plugins;\n\n\nvar Singleton = (function () {\n  let instance:ContactTracing;\n\n  function createInstance() {\n      var ct = new ContactTracing();\n      return ct;\n  }\n\n  return {\n      getInstance: function () {\n          if (!instance) {\n              instance = createInstance();\n          }\n          return instance;\n      }\n  };\n})();\n\n class ContactTracing {\n  private contacts:Contact[] = [];\n  private selected:Contact[] = [];\n  private conIndex:boolean[] = [];\n\n\n\n  private symptomList = [\n    {val: \"Cough\", isChecked: false},\n    {val: \"Fever or chills\", isChecked: false},\n    {val: \"Shortness of breath or difficulty breathing\", isChecked: false},\n    {val: \"Fatigue\", isChecked: false},\n    {val: \"Muscle or body aches\", isChecked: false},\n    {val: \"Headaches\", isChecked: false},\n    {val: \"New loss of taste or smell\", isChecked: false},\n    {val: \"Sore throat\", isChecked: false},\n    {val: \"Congestion or runny nose\", isChecked: false},\n    {val: \"Nausea or vomiting\", isChecked: false},\n    {val: \"Diarrhea\", isChecked: false}\n  ]\n  \n  private emergencyList = [\n    {val: \"Trouble breathing\", isChecked: false},\n    {val: \"Persistent pain or pressure in chest\", isChecked: false},\n    {val: \"New confusion\", isChecked: false},\n    {val: \"Inability to wake or stay awake\", isChecked: false},\n    {val: \"Bluish lips or face\", isChecked: false}\n  ]\n\n  public constructor(){\n    this.loadContacts();\n    //this.sms = typeof SMS;\n  }\n\n  public getEmergencyList(){\n    return this.emergencyList;\n  }\n\n  public getSymptomsList(){\n    return this.symptomList;\n  }\n\n  public getContactIndex(){\n    return this.conIndex;\n  }\n\n  public checkSymptom(i:number){\n    if(i < this.symptomList.length){\n      this.symptomList[i].isChecked = !(this.symptomList[i].isChecked);\n    }\n  }\n  public checkEmergency(i:number){\n    if(i < this.emergencyList.length){\n      this.emergencyList[i].isChecked = !(this.emergencyList[i].isChecked);\n    }\n  }\n  \n  //Updates list of \n  public check(i:number){\n    if(i < this.conIndex.length){\n      this.conIndex[i] = !(this.conIndex[i]);\n    }\n  }\n  \n  //Getter method for all device contacts\n  //Void input\n  //Returns list of Contact objects\n  public getContacts(){\n    console.log('GRABBING CONTACT LIST FROM OBJECT\\n');\n    //console.log(this.contacts);\n    return this.contacts;\n  }\n\n  //Getter method for selected device contacts\n  //Void input\n  //Returns list of Contact objects\n  public getSelected(){\n    return this.selected;\n  }\n\n\n  public sendMessage(){\n    // for(var i = 0; i<this.contacts.length; i++){\n    //   if(this.conIndex[i]){\n    //     this.selected.push(this.contacts[i]);\n    //   }\n    // }\n\n    // console.log(\"SELECTED CONTACTS\");\n    // console.log(this.selected);\n    this.sendSms();\n  }\n\n  public select(i:number){\n    if(i >= 0){\n      if(i < this.contacts.length){\n        this.conIndex[i] = !(this.conIndex[i]);\n      }\n    }\n  }\n\n  private async loadContacts(){\n    Contacts.getContacts().then(results => {\n    this.contacts = results.contacts;\n    console.log(this.contacts);\n\n    for(var i = 0; i < this.contacts.length; i++){\n      this.conIndex.push(false);\n    }\n    });\n  }\n\n  // private success(){ alert('Message sent successfully'); };\n  // private error(e) { alert('Message Failed:' + e); };\n  \n  private async sendSms(){\n    \n    var title:string = \"I have experiencing symptoms of Covid-19\\n\";\n\n    var message:string = \"\";\n    \n    message += \"------------------------------\\nIF EXPERIENCING SEEK IMMEDIATE MEDICAL ATTENTION!\\n\";\n    for(var index in this.emergencyList){\n      if(this.emergencyList[index].isChecked){\n        message += this.emergencyList[index].val + \"\\n\";\n      }\n    }\n\n    message += \"------------------------------\\nNon-Emergency Symptoms:\\n\";\n    for(var index1 in this.symptomList){\n      if(this.symptomList[index1].isChecked){\n        message += this.symptomList[index1].val + \"\\n\";\n      }\n    }\n\n    \n    // var options = {\n    //   replaceLineBreaks: false, // true to replace \\n by a new line, false by default\n    //   android: {\n    //       intent: 'INTENT'  // send SMS with the native android SMS messaging\n    //       //intent: '' // send SMS without opening any other app, require : android.permission.SEND_SMS and android.permission.READ_PHONE_STATE\n    //   }\n    // };\n    \n    //var number = '5167120628';\n\n    let shareRet = await Share.share({\n      title: title,\n      text: message,\n      url: 'http://ionicframework.com/',\n      dialogTitle: 'Share with those who you have been in contact with'\n    });\n\n    if (shareRet){\n      console.log(\"Success!\\n\");\n    }else{\n      console.log(\"Failed\\n\");\n    }\n\n    // SMS.send(number, message, options).then(\n    //   success => {\n    //     console.log(success);\n    //   },\n    //   error => {\n    //     console.log(error);\n    //   },\n    // );\n\n  }\n\n\n}\nexport default Singleton;\n\n\n  // private onSuccess(contacts:Contact[]){\n  //   console.log(contacts.length + ' contacts found');\n  //   for(var i = 0; i < contacts.length; i++) {\n  //     console.log(contacts[i].contactId + \" - \" + contacts[i].displayName);\n  //     for(var j = 0; j < contacts[i].phoneNumbers.length; j++) {\n  //        var phone = contacts[i].phoneNumbers[j];\n  //        console.log(\"===> \" + phone + \"\\n\");\n  //     }\n  //  }\n  // }\n\n  // private onError(error:string){\n  //   console.log(\"Error grabbing contacts! \" + error);\n  // }\n"]},"metadata":{},"sourceType":"module"}