{"ast":null,"code":"import { __awaiter, __generator, __spreadArrays } from \"tslib\";\nimport { b as getIonMode, c as config } from './ionic-global-23e7365a.js';\nimport { a as addEventListener, b as removeEventListener, g as getElementRoot } from './helpers-47d562d2.js';\nimport { OVERLAY_BACK_BUTTON_PRIORITY } from './hardware-back-button-7b6ede21.js';\nvar lastId = 0;\nvar activeAnimations = new WeakMap();\n\nvar createController = function (tagName) {\n  return {\n    create: function (options) {\n      return createOverlay(tagName, options);\n    },\n    dismiss: function (data, role, id) {\n      return dismissOverlay(document, data, role, tagName, id);\n    },\n    getTop: function () {\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          return [2\n          /*return*/\n          , getOverlay(document, tagName)];\n        });\n      });\n    }\n  };\n};\n\nvar alertController = /*@__PURE__*/createController('ion-alert');\nvar actionSheetController = /*@__PURE__*/createController('ion-action-sheet');\nvar loadingController = /*@__PURE__*/createController('ion-loading');\nvar modalController = /*@__PURE__*/createController('ion-modal');\nvar pickerController = /*@__PURE__*/createController('ion-picker');\nvar popoverController = /*@__PURE__*/createController('ion-popover');\nvar toastController = /*@__PURE__*/createController('ion-toast');\n\nvar prepareOverlay = function (el) {\n  /* tslint:disable-next-line */\n  if (typeof document !== 'undefined') {\n    connectListeners(document);\n  }\n\n  var overlayIndex = lastId++;\n  el.overlayIndex = overlayIndex;\n\n  if (!el.hasAttribute('id')) {\n    el.id = \"ion-overlay-\" + overlayIndex;\n  }\n};\n\nvar createOverlay = function (tagName, opts) {\n  /* tslint:disable-next-line */\n  if (typeof customElements !== 'undefined') {\n    return customElements.whenDefined(tagName).then(function () {\n      var element = document.createElement(tagName);\n      element.classList.add('overlay-hidden'); // convert the passed in overlay options into props\n      // that get passed down into the new overlay\n\n      Object.assign(element, opts); // append the overlay element to the document body\n\n      getAppRoot(document).appendChild(element);\n      return element.componentOnReady();\n    });\n  }\n\n  return Promise.resolve();\n};\n\nvar focusableQueryString = '[tabindex]:not([tabindex^=\"-\"]), input:not([type=hidden]):not([tabindex^=\"-\"]), textarea:not([tabindex^=\"-\"]), button:not([tabindex^=\"-\"]), select:not([tabindex^=\"-\"]), .ion-focusable:not([tabindex^=\"-\"])';\nvar innerFocusableQueryString = 'input:not([type=hidden]), textarea, button, select';\n\nvar focusFirstDescendant = function (ref, overlay) {\n  var firstInput = ref.querySelector(focusableQueryString);\n  var shadowRoot = firstInput && firstInput.shadowRoot;\n\n  if (shadowRoot) {\n    // If there are no inner focusable elements, just focus the host element.\n    firstInput = shadowRoot.querySelector(innerFocusableQueryString) || firstInput;\n  }\n\n  if (firstInput) {\n    firstInput.focus();\n  } else {\n    // Focus overlay instead of letting focus escape\n    overlay.focus();\n  }\n};\n\nvar focusLastDescendant = function (ref, overlay) {\n  var inputs = Array.from(ref.querySelectorAll(focusableQueryString));\n  var lastInput = inputs.length > 0 ? inputs[inputs.length - 1] : null;\n  var shadowRoot = lastInput && lastInput.shadowRoot;\n\n  if (shadowRoot) {\n    // If there are no inner focusable elements, just focus the host element.\n    lastInput = shadowRoot.querySelector(innerFocusableQueryString) || lastInput;\n  }\n\n  if (lastInput) {\n    lastInput.focus();\n  } else {\n    // Focus overlay instead of letting focus escape\n    overlay.focus();\n  }\n};\n/**\n * Traps keyboard focus inside of overlay components.\n * Based on https://w3c.github.io/aria-practices/examples/dialog-modal/alertdialog.html\n * This includes the following components: Action Sheet, Alert, Loading, Modal,\n * Picker, and Popover.\n * Should NOT include: Toast\n */\n\n\nvar trapKeyboardFocus = function (ev, doc) {\n  var lastOverlay = getOverlay(doc);\n  var target = ev.target; // If no active overlay, ignore this event\n\n  if (!lastOverlay || !target) {\n    return;\n  }\n  /**\n   * If we are focusing the overlay, clear\n   * the last focused element so that hitting\n   * tab activates the first focusable element\n   * in the overlay wrapper.\n   */\n\n\n  if (lastOverlay === target) {\n    lastOverlay.lastFocus = undefined;\n    /**\n     * Otherwise, we must be focusing an element\n     * inside of the overlay. The two possible options\n     * here are an input/button/etc or the ion-focus-trap\n     * element. The focus trap element is used to prevent\n     * the keyboard focus from leaving the overlay when\n     * using Tab or screen assistants.\n     */\n  } else {\n    /**\n     * We do not want to focus the traps, so get the overlay\n     * wrapper element as the traps live outside of the wrapper.\n     */\n    var overlayRoot = getElementRoot(lastOverlay);\n\n    if (!overlayRoot.contains(target)) {\n      return;\n    }\n\n    var overlayWrapper = overlayRoot.querySelector('.ion-overlay-wrapper');\n\n    if (!overlayWrapper) {\n      return;\n    }\n    /**\n     * If the target is inside the wrapper, let the browser\n     * focus as normal and keep a log of the last focused element.\n     */\n\n\n    if (overlayWrapper.contains(target)) {\n      lastOverlay.lastFocus = target;\n    } else {\n      /**\n       * Otherwise, we must have focused one of the focus traps.\n       * We need to wrap the focus to either the first element\n       * or the last element.\n       */\n\n      /**\n       * Once we call `focusFirstDescendant` and focus the first\n       * descendant, another focus event will fire which will\n       * cause `lastOverlay.lastFocus` to be updated before\n       * we can run the code after that. We will cache the value\n       * here to avoid that.\n       */\n      var lastFocus = lastOverlay.lastFocus; // Focus the first element in the overlay wrapper\n\n      focusFirstDescendant(overlayWrapper, lastOverlay);\n      /**\n       * If the cached last focused element is the\n       * same as the active element, then we need\n       * to wrap focus to the last descendant. This happens\n       * when the first descendant is focused, and the user\n       * presses Shift + Tab. The previous line will focus\n       * the same descendant again (the first one), causing\n       * last focus to equal the active element.\n       */\n\n      if (lastFocus === doc.activeElement) {\n        focusLastDescendant(overlayWrapper, lastOverlay);\n      }\n\n      lastOverlay.lastFocus = doc.activeElement;\n    }\n  }\n};\n\nvar connectListeners = function (doc) {\n  if (lastId === 0) {\n    lastId = 1;\n    doc.addEventListener('focus', function (ev) {\n      return trapKeyboardFocus(ev, doc);\n    }, true); // handle back-button click\n\n    doc.addEventListener('ionBackButton', function (ev) {\n      var lastOverlay = getOverlay(doc);\n\n      if (lastOverlay && lastOverlay.backdropDismiss) {\n        ev.detail.register(OVERLAY_BACK_BUTTON_PRIORITY, function () {\n          return lastOverlay.dismiss(undefined, BACKDROP);\n        });\n      }\n    }); // handle ESC to close overlay\n\n    doc.addEventListener('keyup', function (ev) {\n      if (ev.key === 'Escape') {\n        var lastOverlay = getOverlay(doc);\n\n        if (lastOverlay && lastOverlay.backdropDismiss) {\n          lastOverlay.dismiss(undefined, BACKDROP);\n        }\n      }\n    });\n  }\n};\n\nvar dismissOverlay = function (doc, data, role, overlayTag, id) {\n  var overlay = getOverlay(doc, overlayTag, id);\n\n  if (!overlay) {\n    return Promise.reject('overlay does not exist');\n  }\n\n  return overlay.dismiss(data, role);\n};\n\nvar getOverlays = function (doc, selector) {\n  if (selector === undefined) {\n    selector = 'ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast';\n  }\n\n  return Array.from(doc.querySelectorAll(selector)).filter(function (c) {\n    return c.overlayIndex > 0;\n  });\n};\n\nvar getOverlay = function (doc, overlayTag, id) {\n  var overlays = getOverlays(doc, overlayTag);\n  return id === undefined ? overlays[overlays.length - 1] : overlays.find(function (o) {\n    return o.id === id;\n  });\n};\n\nvar present = function (overlay, name, iosEnterAnimation, mdEnterAnimation, opts) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var mode, animationBuilder, completed;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (overlay.presented) {\n            return [2\n            /*return*/\n            ];\n          }\n\n          overlay.presented = true;\n          overlay.willPresent.emit();\n          mode = getIonMode(overlay);\n          animationBuilder = overlay.enterAnimation ? overlay.enterAnimation : config.get(name, mode === 'ios' ? iosEnterAnimation : mdEnterAnimation);\n          return [4\n          /*yield*/\n          , overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\n\n        case 1:\n          completed = _a.sent();\n\n          if (completed) {\n            overlay.didPresent.emit();\n          }\n          /**\n           * When an overlay that steals focus\n           * is dismissed, focus should be returned\n           * to the element that was focused\n           * prior to the overlay opening. Toast\n           * does not steal focus and is excluded\n           * from returning focus as a result.\n           */\n\n\n          if (overlay.el.tagName !== 'ION-TOAST') {\n            focusPreviousElementOnDismiss(overlay.el);\n          }\n\n          if (overlay.keyboardClose) {\n            overlay.el.focus();\n          }\n\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\n/**\n * When an overlay component is dismissed,\n * focus should be returned to the element\n * that presented the overlay. Otherwise\n * focus will be set on the body which\n * means that people using screen readers\n * or tabbing will need to re-navigate\n * to where they were before they\n * opened the overlay.\n */\n\n\nvar focusPreviousElementOnDismiss = function (overlayEl) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var previousElement, shadowRoot;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          previousElement = document.activeElement;\n\n          if (!previousElement) {\n            return [2\n            /*return*/\n            ];\n          }\n\n          shadowRoot = previousElement && previousElement.shadowRoot;\n\n          if (shadowRoot) {\n            // If there are no inner focusable elements, just focus the host element.\n            previousElement = shadowRoot.querySelector(innerFocusableQueryString) || previousElement;\n          }\n\n          return [4\n          /*yield*/\n          , overlayEl.onDidDismiss()];\n\n        case 1:\n          _a.sent();\n\n          previousElement.focus();\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\n\nvar dismiss = function (overlay, data, role, name, iosLeaveAnimation, mdLeaveAnimation, opts) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var mode, animationBuilder, err_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          if (!overlay.presented) {\n            return [2\n            /*return*/\n            , false];\n          }\n\n          overlay.presented = false;\n          _a.label = 1;\n\n        case 1:\n          _a.trys.push([1, 4,, 5]); // Overlay contents should not be clickable during dismiss\n\n\n          overlay.el.style.setProperty('pointer-events', 'none');\n          overlay.willDismiss.emit({\n            data: data,\n            role: role\n          });\n          mode = getIonMode(overlay);\n          animationBuilder = overlay.leaveAnimation ? overlay.leaveAnimation : config.get(name, mode === 'ios' ? iosLeaveAnimation : mdLeaveAnimation);\n          if (!(role !== 'gesture')) return [3\n          /*break*/\n          , 3];\n          return [4\n          /*yield*/\n          , overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\n\n        case 2:\n          _a.sent();\n\n          _a.label = 3;\n\n        case 3:\n          overlay.didDismiss.emit({\n            data: data,\n            role: role\n          });\n          activeAnimations.delete(overlay);\n          return [3\n          /*break*/\n          , 5];\n\n        case 4:\n          err_1 = _a.sent();\n          console.error(err_1);\n          return [3\n          /*break*/\n          , 5];\n\n        case 5:\n          overlay.el.remove();\n          return [2\n          /*return*/\n          , true];\n      }\n    });\n  });\n};\n\nvar getAppRoot = function (doc) {\n  return doc.querySelector('ion-app') || doc.body;\n};\n\nvar overlayAnimation = function (overlay, animationBuilder, baseEl, opts) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var aniRoot, animation, activeAni;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          // Make overlay visible in case it's hidden\n          baseEl.classList.remove('overlay-hidden');\n          aniRoot = baseEl.shadowRoot || overlay.el;\n          animation = animationBuilder(aniRoot, opts);\n\n          if (!overlay.animated || !config.getBoolean('animated', true)) {\n            animation.duration(0);\n          }\n\n          if (overlay.keyboardClose) {\n            animation.beforeAddWrite(function () {\n              var activeElement = baseEl.ownerDocument.activeElement;\n\n              if (activeElement && activeElement.matches('input, ion-input, ion-textarea')) {\n                activeElement.blur();\n              }\n            });\n          }\n\n          activeAni = activeAnimations.get(overlay) || [];\n          activeAnimations.set(overlay, __spreadArrays(activeAni, [animation]));\n          return [4\n          /*yield*/\n          , animation.play()];\n\n        case 1:\n          _a.sent();\n\n          return [2\n          /*return*/\n          , true];\n      }\n    });\n  });\n};\n\nvar eventMethod = function (element, eventName) {\n  var resolve;\n  var promise = new Promise(function (r) {\n    return resolve = r;\n  });\n  onceEvent(element, eventName, function (event) {\n    resolve(event.detail);\n  });\n  return promise;\n};\n\nvar onceEvent = function (element, eventName, callback) {\n  var handler = function (ev) {\n    removeEventListener(element, eventName, handler);\n    callback(ev);\n  };\n\n  addEventListener(element, eventName, handler);\n};\n\nvar isCancel = function (role) {\n  return role === 'cancel' || role === BACKDROP;\n};\n\nvar defaultGate = function (h) {\n  return h();\n};\n\nvar safeCall = function (handler, arg) {\n  if (typeof handler === 'function') {\n    var jmp = config.get('_zoneGate', defaultGate);\n    return jmp(function () {\n      try {\n        return handler(arg);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n\n  return undefined;\n};\n\nvar BACKDROP = 'backdrop';\nexport { BACKDROP as B, alertController as a, actionSheetController as b, popoverController as c, present as d, prepareOverlay as e, dismiss as f, eventMethod as g, activeAnimations as h, isCancel as i, loadingController as l, modalController as m, pickerController as p, safeCall as s, toastController as t };","map":{"version":3,"sources":["/Users/zhirongwang/Desktop/cs130/node_modules/@ionic/core/dist/esm-es5/overlays-d577c227.js"],"names":["__awaiter","__generator","__spreadArrays","b","getIonMode","c","config","a","addEventListener","removeEventListener","g","getElementRoot","OVERLAY_BACK_BUTTON_PRIORITY","lastId","activeAnimations","WeakMap","createController","tagName","create","options","createOverlay","dismiss","data","role","id","dismissOverlay","document","getTop","_a","getOverlay","alertController","actionSheetController","loadingController","modalController","pickerController","popoverController","toastController","prepareOverlay","el","connectListeners","overlayIndex","hasAttribute","opts","customElements","whenDefined","then","element","createElement","classList","add","Object","assign","getAppRoot","appendChild","componentOnReady","Promise","resolve","focusableQueryString","innerFocusableQueryString","focusFirstDescendant","ref","overlay","firstInput","querySelector","shadowRoot","focus","focusLastDescendant","inputs","Array","from","querySelectorAll","lastInput","length","trapKeyboardFocus","ev","doc","lastOverlay","target","lastFocus","undefined","overlayRoot","contains","overlayWrapper","activeElement","backdropDismiss","detail","register","BACKDROP","key","overlayTag","reject","getOverlays","selector","filter","overlays","find","o","present","name","iosEnterAnimation","mdEnterAnimation","mode","animationBuilder","completed","label","presented","willPresent","emit","enterAnimation","get","overlayAnimation","sent","didPresent","focusPreviousElementOnDismiss","keyboardClose","overlayEl","previousElement","onDidDismiss","iosLeaveAnimation","mdLeaveAnimation","err_1","trys","push","style","setProperty","willDismiss","leaveAnimation","didDismiss","delete","console","error","remove","body","baseEl","aniRoot","animation","activeAni","animated","getBoolean","duration","beforeAddWrite","ownerDocument","matches","blur","set","play","eventMethod","eventName","promise","r","onceEvent","event","callback","handler","isCancel","defaultGate","h","safeCall","arg","jmp","e","B","d","f","i","l","m","p","s","t"],"mappings":"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","sourcesContent":["import { __awaiter, __generator, __spreadArrays } from \"tslib\";\nimport { b as getIonMode, c as config } from './ionic-global-23e7365a.js';\nimport { a as addEventListener, b as removeEventListener, g as getElementRoot } from './helpers-47d562d2.js';\nimport { OVERLAY_BACK_BUTTON_PRIORITY } from './hardware-back-button-7b6ede21.js';\nvar lastId = 0;\nvar activeAnimations = new WeakMap();\nvar createController = function (tagName) {\n    return {\n        create: function (options) {\n            return createOverlay(tagName, options);\n        },\n        dismiss: function (data, role, id) {\n            return dismissOverlay(document, data, role, tagName, id);\n        },\n        getTop: function () {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    return [2 /*return*/, getOverlay(document, tagName)];\n                });\n            });\n        }\n    };\n};\nvar alertController = /*@__PURE__*/ createController('ion-alert');\nvar actionSheetController = /*@__PURE__*/ createController('ion-action-sheet');\nvar loadingController = /*@__PURE__*/ createController('ion-loading');\nvar modalController = /*@__PURE__*/ createController('ion-modal');\nvar pickerController = /*@__PURE__*/ createController('ion-picker');\nvar popoverController = /*@__PURE__*/ createController('ion-popover');\nvar toastController = /*@__PURE__*/ createController('ion-toast');\nvar prepareOverlay = function (el) {\n    /* tslint:disable-next-line */\n    if (typeof document !== 'undefined') {\n        connectListeners(document);\n    }\n    var overlayIndex = lastId++;\n    el.overlayIndex = overlayIndex;\n    if (!el.hasAttribute('id')) {\n        el.id = \"ion-overlay-\" + overlayIndex;\n    }\n};\nvar createOverlay = function (tagName, opts) {\n    /* tslint:disable-next-line */\n    if (typeof customElements !== 'undefined') {\n        return customElements.whenDefined(tagName).then(function () {\n            var element = document.createElement(tagName);\n            element.classList.add('overlay-hidden');\n            // convert the passed in overlay options into props\n            // that get passed down into the new overlay\n            Object.assign(element, opts);\n            // append the overlay element to the document body\n            getAppRoot(document).appendChild(element);\n            return element.componentOnReady();\n        });\n    }\n    return Promise.resolve();\n};\nvar focusableQueryString = '[tabindex]:not([tabindex^=\"-\"]), input:not([type=hidden]):not([tabindex^=\"-\"]), textarea:not([tabindex^=\"-\"]), button:not([tabindex^=\"-\"]), select:not([tabindex^=\"-\"]), .ion-focusable:not([tabindex^=\"-\"])';\nvar innerFocusableQueryString = 'input:not([type=hidden]), textarea, button, select';\nvar focusFirstDescendant = function (ref, overlay) {\n    var firstInput = ref.querySelector(focusableQueryString);\n    var shadowRoot = firstInput && firstInput.shadowRoot;\n    if (shadowRoot) {\n        // If there are no inner focusable elements, just focus the host element.\n        firstInput = shadowRoot.querySelector(innerFocusableQueryString) || firstInput;\n    }\n    if (firstInput) {\n        firstInput.focus();\n    }\n    else {\n        // Focus overlay instead of letting focus escape\n        overlay.focus();\n    }\n};\nvar focusLastDescendant = function (ref, overlay) {\n    var inputs = Array.from(ref.querySelectorAll(focusableQueryString));\n    var lastInput = inputs.length > 0 ? inputs[inputs.length - 1] : null;\n    var shadowRoot = lastInput && lastInput.shadowRoot;\n    if (shadowRoot) {\n        // If there are no inner focusable elements, just focus the host element.\n        lastInput = shadowRoot.querySelector(innerFocusableQueryString) || lastInput;\n    }\n    if (lastInput) {\n        lastInput.focus();\n    }\n    else {\n        // Focus overlay instead of letting focus escape\n        overlay.focus();\n    }\n};\n/**\n * Traps keyboard focus inside of overlay components.\n * Based on https://w3c.github.io/aria-practices/examples/dialog-modal/alertdialog.html\n * This includes the following components: Action Sheet, Alert, Loading, Modal,\n * Picker, and Popover.\n * Should NOT include: Toast\n */\nvar trapKeyboardFocus = function (ev, doc) {\n    var lastOverlay = getOverlay(doc);\n    var target = ev.target;\n    // If no active overlay, ignore this event\n    if (!lastOverlay || !target) {\n        return;\n    }\n    /**\n     * If we are focusing the overlay, clear\n     * the last focused element so that hitting\n     * tab activates the first focusable element\n     * in the overlay wrapper.\n     */\n    if (lastOverlay === target) {\n        lastOverlay.lastFocus = undefined;\n        /**\n         * Otherwise, we must be focusing an element\n         * inside of the overlay. The two possible options\n         * here are an input/button/etc or the ion-focus-trap\n         * element. The focus trap element is used to prevent\n         * the keyboard focus from leaving the overlay when\n         * using Tab or screen assistants.\n         */\n    }\n    else {\n        /**\n         * We do not want to focus the traps, so get the overlay\n         * wrapper element as the traps live outside of the wrapper.\n         */\n        var overlayRoot = getElementRoot(lastOverlay);\n        if (!overlayRoot.contains(target)) {\n            return;\n        }\n        var overlayWrapper = overlayRoot.querySelector('.ion-overlay-wrapper');\n        if (!overlayWrapper) {\n            return;\n        }\n        /**\n         * If the target is inside the wrapper, let the browser\n         * focus as normal and keep a log of the last focused element.\n         */\n        if (overlayWrapper.contains(target)) {\n            lastOverlay.lastFocus = target;\n        }\n        else {\n            /**\n             * Otherwise, we must have focused one of the focus traps.\n             * We need to wrap the focus to either the first element\n             * or the last element.\n             */\n            /**\n             * Once we call `focusFirstDescendant` and focus the first\n             * descendant, another focus event will fire which will\n             * cause `lastOverlay.lastFocus` to be updated before\n             * we can run the code after that. We will cache the value\n             * here to avoid that.\n             */\n            var lastFocus = lastOverlay.lastFocus;\n            // Focus the first element in the overlay wrapper\n            focusFirstDescendant(overlayWrapper, lastOverlay);\n            /**\n             * If the cached last focused element is the\n             * same as the active element, then we need\n             * to wrap focus to the last descendant. This happens\n             * when the first descendant is focused, and the user\n             * presses Shift + Tab. The previous line will focus\n             * the same descendant again (the first one), causing\n             * last focus to equal the active element.\n             */\n            if (lastFocus === doc.activeElement) {\n                focusLastDescendant(overlayWrapper, lastOverlay);\n            }\n            lastOverlay.lastFocus = doc.activeElement;\n        }\n    }\n};\nvar connectListeners = function (doc) {\n    if (lastId === 0) {\n        lastId = 1;\n        doc.addEventListener('focus', function (ev) { return trapKeyboardFocus(ev, doc); }, true);\n        // handle back-button click\n        doc.addEventListener('ionBackButton', function (ev) {\n            var lastOverlay = getOverlay(doc);\n            if (lastOverlay && lastOverlay.backdropDismiss) {\n                ev.detail.register(OVERLAY_BACK_BUTTON_PRIORITY, function () {\n                    return lastOverlay.dismiss(undefined, BACKDROP);\n                });\n            }\n        });\n        // handle ESC to close overlay\n        doc.addEventListener('keyup', function (ev) {\n            if (ev.key === 'Escape') {\n                var lastOverlay = getOverlay(doc);\n                if (lastOverlay && lastOverlay.backdropDismiss) {\n                    lastOverlay.dismiss(undefined, BACKDROP);\n                }\n            }\n        });\n    }\n};\nvar dismissOverlay = function (doc, data, role, overlayTag, id) {\n    var overlay = getOverlay(doc, overlayTag, id);\n    if (!overlay) {\n        return Promise.reject('overlay does not exist');\n    }\n    return overlay.dismiss(data, role);\n};\nvar getOverlays = function (doc, selector) {\n    if (selector === undefined) {\n        selector = 'ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast';\n    }\n    return Array.from(doc.querySelectorAll(selector))\n        .filter(function (c) { return c.overlayIndex > 0; });\n};\nvar getOverlay = function (doc, overlayTag, id) {\n    var overlays = getOverlays(doc, overlayTag);\n    return (id === undefined)\n        ? overlays[overlays.length - 1]\n        : overlays.find(function (o) { return o.id === id; });\n};\nvar present = function (overlay, name, iosEnterAnimation, mdEnterAnimation, opts) { return __awaiter(void 0, void 0, void 0, function () {\n    var mode, animationBuilder, completed;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (overlay.presented) {\n                    return [2 /*return*/];\n                }\n                overlay.presented = true;\n                overlay.willPresent.emit();\n                mode = getIonMode(overlay);\n                animationBuilder = (overlay.enterAnimation)\n                    ? overlay.enterAnimation\n                    : config.get(name, mode === 'ios' ? iosEnterAnimation : mdEnterAnimation);\n                return [4 /*yield*/, overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\n            case 1:\n                completed = _a.sent();\n                if (completed) {\n                    overlay.didPresent.emit();\n                }\n                /**\n                 * When an overlay that steals focus\n                 * is dismissed, focus should be returned\n                 * to the element that was focused\n                 * prior to the overlay opening. Toast\n                 * does not steal focus and is excluded\n                 * from returning focus as a result.\n                 */\n                if (overlay.el.tagName !== 'ION-TOAST') {\n                    focusPreviousElementOnDismiss(overlay.el);\n                }\n                if (overlay.keyboardClose) {\n                    overlay.el.focus();\n                }\n                return [2 /*return*/];\n        }\n    });\n}); };\n/**\n * When an overlay component is dismissed,\n * focus should be returned to the element\n * that presented the overlay. Otherwise\n * focus will be set on the body which\n * means that people using screen readers\n * or tabbing will need to re-navigate\n * to where they were before they\n * opened the overlay.\n */\nvar focusPreviousElementOnDismiss = function (overlayEl) { return __awaiter(void 0, void 0, void 0, function () {\n    var previousElement, shadowRoot;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                previousElement = document.activeElement;\n                if (!previousElement) {\n                    return [2 /*return*/];\n                }\n                shadowRoot = previousElement && previousElement.shadowRoot;\n                if (shadowRoot) {\n                    // If there are no inner focusable elements, just focus the host element.\n                    previousElement = shadowRoot.querySelector(innerFocusableQueryString) || previousElement;\n                }\n                return [4 /*yield*/, overlayEl.onDidDismiss()];\n            case 1:\n                _a.sent();\n                previousElement.focus();\n                return [2 /*return*/];\n        }\n    });\n}); };\nvar dismiss = function (overlay, data, role, name, iosLeaveAnimation, mdLeaveAnimation, opts) { return __awaiter(void 0, void 0, void 0, function () {\n    var mode, animationBuilder, err_1;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                if (!overlay.presented) {\n                    return [2 /*return*/, false];\n                }\n                overlay.presented = false;\n                _a.label = 1;\n            case 1:\n                _a.trys.push([1, 4, , 5]);\n                // Overlay contents should not be clickable during dismiss\n                overlay.el.style.setProperty('pointer-events', 'none');\n                overlay.willDismiss.emit({ data: data, role: role });\n                mode = getIonMode(overlay);\n                animationBuilder = (overlay.leaveAnimation)\n                    ? overlay.leaveAnimation\n                    : config.get(name, mode === 'ios' ? iosLeaveAnimation : mdLeaveAnimation);\n                if (!(role !== 'gesture')) return [3 /*break*/, 3];\n                return [4 /*yield*/, overlayAnimation(overlay, animationBuilder, overlay.el, opts)];\n            case 2:\n                _a.sent();\n                _a.label = 3;\n            case 3:\n                overlay.didDismiss.emit({ data: data, role: role });\n                activeAnimations.delete(overlay);\n                return [3 /*break*/, 5];\n            case 4:\n                err_1 = _a.sent();\n                console.error(err_1);\n                return [3 /*break*/, 5];\n            case 5:\n                overlay.el.remove();\n                return [2 /*return*/, true];\n        }\n    });\n}); };\nvar getAppRoot = function (doc) {\n    return doc.querySelector('ion-app') || doc.body;\n};\nvar overlayAnimation = function (overlay, animationBuilder, baseEl, opts) { return __awaiter(void 0, void 0, void 0, function () {\n    var aniRoot, animation, activeAni;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                // Make overlay visible in case it's hidden\n                baseEl.classList.remove('overlay-hidden');\n                aniRoot = baseEl.shadowRoot || overlay.el;\n                animation = animationBuilder(aniRoot, opts);\n                if (!overlay.animated || !config.getBoolean('animated', true)) {\n                    animation.duration(0);\n                }\n                if (overlay.keyboardClose) {\n                    animation.beforeAddWrite(function () {\n                        var activeElement = baseEl.ownerDocument.activeElement;\n                        if (activeElement && activeElement.matches('input, ion-input, ion-textarea')) {\n                            activeElement.blur();\n                        }\n                    });\n                }\n                activeAni = activeAnimations.get(overlay) || [];\n                activeAnimations.set(overlay, __spreadArrays(activeAni, [animation]));\n                return [4 /*yield*/, animation.play()];\n            case 1:\n                _a.sent();\n                return [2 /*return*/, true];\n        }\n    });\n}); };\nvar eventMethod = function (element, eventName) {\n    var resolve;\n    var promise = new Promise(function (r) { return resolve = r; });\n    onceEvent(element, eventName, function (event) {\n        resolve(event.detail);\n    });\n    return promise;\n};\nvar onceEvent = function (element, eventName, callback) {\n    var handler = function (ev) {\n        removeEventListener(element, eventName, handler);\n        callback(ev);\n    };\n    addEventListener(element, eventName, handler);\n};\nvar isCancel = function (role) {\n    return role === 'cancel' || role === BACKDROP;\n};\nvar defaultGate = function (h) { return h(); };\nvar safeCall = function (handler, arg) {\n    if (typeof handler === 'function') {\n        var jmp = config.get('_zoneGate', defaultGate);\n        return jmp(function () {\n            try {\n                return handler(arg);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n    return undefined;\n};\nvar BACKDROP = 'backdrop';\nexport { BACKDROP as B, alertController as a, actionSheetController as b, popoverController as c, present as d, prepareOverlay as e, dismiss as f, eventMethod as g, activeAnimations as h, isCancel as i, loadingController as l, modalController as m, pickerController as p, safeCall as s, toastController as t };\n"]},"metadata":{},"sourceType":"module"}