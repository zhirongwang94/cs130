{"ast":null,"code":"var _jsxFileName = \"/Users/shawnyang/Desktop/UCLA/CS130/proj/project/cs130/src/pages/Tab2.tsx\";\nimport axios from 'axios';\nimport React from \"react\";\nimport { IonCard, IonCardContent, IonCardHeader, IonCardSubtitle, IonCardTitle, IonContent, IonHeader, IonImg, IonPage, IonTitle, IonToolbar, IonBadge, IonItem, IonLabel, IonList, IonRouterLink } from \"@ionic/react\";\n\nclass newsFeed extends React.Component {\n  constructor(props) {\n    super(props);\n    this.cases = void 0;\n    this.deaths = void 0;\n    this.county = void 0;\n    this.State = void 0;\n    this.latitude = void 0;\n    this.longitude = void 0;\n\n    this.renderPosts = async () => {\n      console.log(\"hello world\");\n      let url = \"https://gnews.io/api/v4/search?q=\" + this.county + \" Covid&lang=en&country=us&max=10&token=75459139b9417d88389a866dda4a84cb\";\n      console.log(url);\n      let res = await axios({\n        url: url,\n        method: 'get'\n      });\n      let posts = res.data.articles;\n      this.setState({\n        Posts: posts.map((item, i) => /*#__PURE__*/React.createElement(IonCard, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(IonImg, {\n          src: item.image,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(IonCardHeader, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(IonCardTitle, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(IonRouterLink, {\n          href: item.url,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 39\n          }\n        }, item.title)), /*#__PURE__*/React.createElement(IonCardSubtitle, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 25\n          }\n        }, item.description)), /*#__PURE__*/React.createElement(IonCardContent, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 21\n          }\n        }, item.content)))\n      }); // console.log(state)\n      // console.log(\"hello world\")\n    };\n\n    this.renderCases = async () => {\n      console.log(\"hello world\");\n      let url = \"http://127.0.0.1:3313/feed/refresh?loc=\" + this.county;\n      let res = await axios({\n        url: url,\n        method: 'get'\n      });\n      this.cases = res.data.cases;\n      this.deaths = res.data.deaths;\n      console.log(res.data.cases);\n      console.log(res.data.deaths);\n    };\n\n    this.getLatLong = async () => {\n      console.log(\"hello\");\n      new Promise((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(position => {\n          console.log(position.coords);\n          this.latitude = position.coords.latitude;\n          this.longitude = position.coords.longitude;\n          console.log(this.latitude);\n          console.log(this.longitude);\n          resolve();\n        });\n      }).then(() => {\n        this.getLocation().then(() => {\n          this.renderPosts();\n          this.renderCases();\n        });\n      });\n    };\n\n    this.getLocation = async () => {\n      let url = \"https://geo.fcc.gov/api/census/area?lat=\" + this.latitude.toString() + \"&lon=\" + this.longitude.toString() + \"&format=json\";\n      let res = await axios({\n        url: url,\n        method: 'get'\n      });\n      this.State = res.data.results[0].state_name;\n      this.county = res.data.results[0].county_name;\n    };\n\n    this.state = {\n      Posts: ''\n    };\n    this.cases = 0;\n    this.deaths = 0;\n    this.county = '';\n    this.State = '';\n    this.latitude = 38;\n    this.longitude = -118;\n  }\n\n  componentDidMount() {\n    this.getLatLong();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(IonPage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IonHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IonToolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, \"NewsFeed - \", this.county))), /*#__PURE__*/React.createElement(IonContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IonList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IonItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(IonLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 29\n      }\n    }, \"Current Cases\"), /*#__PURE__*/React.createElement(IonBadge, {\n      color: \"warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 29\n      }\n    }, this.cases)), /*#__PURE__*/React.createElement(IonItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(IonLabel, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 29\n      }\n    }, \"Deaths\"), /*#__PURE__*/React.createElement(IonBadge, {\n      color: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 29\n      }\n    }, this.deaths))), this.state.Posts));\n  }\n\n}\n\nexport default newsFeed;","map":{"version":3,"sources":["/Users/shawnyang/Desktop/UCLA/CS130/proj/project/cs130/src/pages/Tab2.tsx"],"names":["axios","React","IonCard","IonCardContent","IonCardHeader","IonCardSubtitle","IonCardTitle","IonContent","IonHeader","IonImg","IonPage","IonTitle","IonToolbar","IonBadge","IonItem","IonLabel","IonList","IonRouterLink","newsFeed","Component","constructor","props","cases","deaths","county","State","latitude","longitude","renderPosts","console","log","url","res","method","posts","data","articles","setState","Posts","map","item","i","image","title","description","content","renderCases","getLatLong","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","coords","then","getLocation","toString","results","state_name","county_name","state","componentDidMount","render"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React from \"react\";\nimport {\n    IonCard,\n    IonCardContent,\n    IonCardHeader,\n    IonCardSubtitle,\n    IonCardTitle, IonContent,\n    IonHeader,\n    IonImg,\n    IonPage, IonTitle, IonToolbar,\n    IonBadge,\n    IonItem,\n    IonLabel,\n    IonListHeader,\n    IonList,\n    IonRouterLink\n} from \"@ionic/react\";\nimport Tab1 from \"./Tab1\";\n\nclass newsFeed extends React.Component<{}, { Posts: string}>{\n    cases: number\n    deaths: number\n    county: string\n    State: string\n    latitude: number;\n    longitude: number;\n    constructor(props){\n        super(props);\n        this.state = {Posts:''};\n        this.cases = 0;\n        this.deaths = 0;\n        this.county = '';\n        this.State = '';\n        this.latitude = 38;\n        this.longitude = -118;\n    }\n    renderPosts = async() => {\n        console.log(\"hello world\")\n        let url = \"https://gnews.io/api/v4/search?q=\" + this.county + \" Covid&lang=en&country=us&max=10&token=75459139b9417d88389a866dda4a84cb\"\n        console.log(url)\n        let res = await axios({url: url,\n            method: 'get'});\n        let posts = res.data.articles;\n        this.setState({\n            Posts: posts.map((item, i) => (\n                <IonCard>\n                    <IonImg src={item.image}/>\n                    <IonCardHeader>\n                        <IonCardTitle><IonRouterLink href={item.url}>{item.title}</IonRouterLink></IonCardTitle>\n                        <IonCardSubtitle>{item.description}</IonCardSubtitle>\n                    </IonCardHeader>\n                    <IonCardContent>\n                        {item.content}\n                    </IonCardContent>\n                </IonCard>\n            ))\n        });\n        // console.log(state)\n        // console.log(\"hello world\")\n    }\n    renderCases = async() => {\n        console.log(\"hello world\")\n        let url = \"http://127.0.0.1:3313/feed/refresh?loc=\" + this.county;\n        let res = await axios({url: url,\n            method: 'get'});\n        this.cases = res.data.cases;\n        this.deaths = res.data.deaths;\n        console.log(res.data.cases);\n        console.log(res.data.deaths);\n    }\n    getLatLong = async() => {\n        console.log(\"hello\");\n        new Promise((resolve, reject) => {\n            navigator.geolocation.getCurrentPosition(\n                position => {\n                    console.log(position.coords);\n                    this.latitude = position.coords.latitude;\n                    this.longitude = position.coords.longitude;\n                    console.log(this.latitude);\n                    console.log(this.longitude);\n                    resolve();\n                }\n            )\n        }).then(() => {\n            this.getLocation().then(() => {\n                    this.renderPosts();\n                    this.renderCases();\n            }\n            );\n        })\n    }\n    getLocation = async() => {\n        let url = \"https://geo.fcc.gov/api/census/area?lat=\" + this.latitude.toString() + \"&lon=\" +\n            this.longitude.toString() + \"&format=json\";\n        let res = await axios({url: url,\n            method: 'get'});\n        this.State = res.data.results[0].state_name;\n        this.county = res.data.results[0].county_name;\n\n    }\n    componentDidMount() {\n        this.getLatLong();\n    }\n    render() {\n        return (\n            <IonPage>\n                <IonHeader>\n                    <IonToolbar>\n                        <IonTitle>NewsFeed - {this.county}</IonTitle>\n                    </IonToolbar>\n                </IonHeader>\n\n                <IonContent>\n                    <IonList>\n                        <IonItem>\n                            <IonLabel>Current Cases</IonLabel>\n                            <IonBadge color=\"warning\" >{this.cases}</IonBadge>\n                        </IonItem>\n                        <IonItem>\n                            <IonLabel>Deaths</IonLabel>\n                            <IonBadge color=\"danger\" >{this.deaths}</IonBadge>\n                        </IonItem>\n                    </IonList>\n                    {this.state.Posts}\n                </IonContent>\n            </IonPage>\n        );\n    }\n}\n\nexport default newsFeed;\n\n"]},"metadata":{},"sourceType":"module"}