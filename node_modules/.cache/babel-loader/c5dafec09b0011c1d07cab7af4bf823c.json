{"ast":null,"code":"import React from'react';import{IonContent,IonHeader,IonPage,IonTitle,IonToolbar,IonButton,IonInput}from'@ionic/react';import{useForm}from\"react-hook-form\";import{useHistory}from'react-router-dom';import firebase from'../Firebase';var validPass=false;var CreateUser=function CreateUser(){var history=useHistory();var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var goNext=function goNext(){history.push('/Tab1');};var goBack=function goBack(){history.push('/OnOpen');};function checkPass(p1,p2){if(p1==p2&&p1.length>=6){validPass=true;}}var onSubmit=function onSubmit(data){checkPass(data.pass1,data.pass2);if(validPass){firebase.auth().createUserWithEmailAndPassword(data.email,data.pass1).then(function(ref){firebase.firestore().collection('users').doc(ref.user.uid).set({'email':data.email,'userID':ref.user.uid});}).catch(function(error){console.log(error);});goNext();}else{console.log('Passwords do not match');}};return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonTitle,{size:\"large\"},\"Create User\"))),/*#__PURE__*/React.createElement(IonContent,{className:\"page\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(\"label\",null,\"Email:\"),/*#__PURE__*/React.createElement(IonInput,{required:true,type:\"email\",id:\"email\",name:\"email\",ref:register}),/*#__PURE__*/React.createElement(\"label\",null,\"Password: (minimum of 6 characters)\"),/*#__PURE__*/React.createElement(IonInput,{required:true,type:\"password\",id:\"pass1\",name:\"pass1\",ref:register}),/*#__PURE__*/React.createElement(\"label\",null,\"Re-enter password:\"),/*#__PURE__*/React.createElement(IonInput,{required:true,type:\"password\",id:\"pass2\",name:\"pass2\",ref:register}),/*#__PURE__*/React.createElement(IonButton,{\"justify-content\":\"center\",color:\"black\",size:\"large\",type:\"submit\"},\"Create Account\"),/*#__PURE__*/React.createElement(IonButton,{color:\"black\",size:\"large\",onClick:goBack},\"Back\"))));};export default CreateUser;","map":{"version":3,"sources":["/Users/calvinyung/Desktop/Fall 2020/cs130/project/cs130/src/pages/CreateUser.tsx"],"names":["React","IonContent","IonHeader","IonPage","IonTitle","IonToolbar","IonButton","IonInput","useForm","useHistory","firebase","validPass","CreateUser","history","register","handleSubmit","goNext","push","goBack","checkPass","p1","p2","length","onSubmit","data","pass1","pass2","auth","createUserWithEmailAndPassword","email","then","ref","firestore","collection","doc","user","uid","set","catch","error","console","log"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { IonContent, \n  IonHeader, \n  IonPage, \n  IonTitle, \n  IonToolbar, \n  IonButton, \n  IonInput,\n  useIonViewWillEnter,\n  IonSelect,\n  IonSelectOption } from '@ionic/react';\nimport ExploreContainer from '../components/ExploreContainer';\nimport { useForm } from \"react-hook-form\"\nimport {useHistory} from 'react-router-dom'\nimport firebase from '../Firebase'\n\ntype AccountCreation = {\n  email: string;\n  pass1: string;\n  pass2: string;\n}\n\nvar validPass = false;\n\nconst CreateUser: React.FC = () => {\n  const history = useHistory()\n  const {register, handleSubmit} = useForm<any>();\n  const goNext = () => {\n    history.push('/Tab1')\n  };\n\n  const goBack = () =>{\n    history.push('/OnOpen')\n  }\n\n  function checkPass(p1: string, p2: string){\n    if (p1 == p2 && p1.length >= 6){\n      validPass = true\n    }\n  }\n\n  const onSubmit = (data: AccountCreation) => {\n    checkPass(data.pass1, data.pass2)\n    if (validPass){\n      firebase.auth().createUserWithEmailAndPassword(data.email, data.pass1).then((ref: any)=>{\n        firebase.firestore().collection('users').doc(ref.user.uid).set({'email': data.email, 'userID': ref.user.uid})\n      }).catch((error)=>{\n        console.log(error)\n      })\n      goNext()\n    } else {\n      console.log('Passwords do not match')\n    }\n  };\n\n  return (\n    <IonPage>\n    <IonHeader>\n    <IonToolbar>\n          <IonTitle size=\"large\">Create User</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"page\">\n        <form onSubmit = {handleSubmit(onSubmit)}>\n          <label>Email:</label>\n            <IonInput\n              required={true}\n              type=\"email\"\n              id=\"email\"\n              name=\"email\"\n              ref={register}\n            />\n          <label>Password: (minimum of 6 characters)</label>\n            <IonInput\n              required={true}\n              type=\"password\"\n              id=\"pass1\"\n              name=\"pass1\"\n              ref={register}\n            />\n          <label>Re-enter password:</label>\n            <IonInput\n              required={true}\n              type=\"password\"\n              id=\"pass2\"\n              name=\"pass2\"\n              ref={register}\n            />\n          <IonButton justify-content='center' color=\"black\" size='large' type=\"submit\">Create Account</IonButton>\n          <IonButton color=\"black\" size=\"large\" onClick={goBack}>Back</IonButton>\n          </form>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default CreateUser;"]},"metadata":{},"sourceType":"module"}